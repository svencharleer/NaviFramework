<html>
  <head>
    <title>Navi Framework Testbed</title>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <link rel="stylesheet" href="css/naviFramework.css">
	<script type="text/javascript" src="js/3rdParty/paper.js"></script>
	<script type="text/javascript" src="js/3rdParty/magictouch.js"></script>
	<script type="text/javascript" src="js/3rdParty/jquery-1.9.1.min.js"></script>
	
	<script type="text/javascript" src="js/NaviFramework/naviFramework_UI.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviFramework_Events.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviFramework_Animations.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Animatable.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Group.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Renderable.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Renderable_Image.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Renderable_Square.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Renderable_Text.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviComponent_Touchable.js"></script>
	<script type="text/javascript" src="js/NaviFramework/naviObject_Scene.js"></script>
	<script type="text/javascript" src="js/NaviLearnScape/navi_CustomBadge.js"></script>
	<script type="text/javascript" src="js/NaviLearnScape/navi_CustomMenuItem.js"></script>
	<script type="text/javascript" src="js/NaviLearnScape/navi_CustomMenu.js"></script>
	<script type="text/javascript" src="js/NaviLearnScape/navi_CustomScene_Badges.js"></script>
	<script type="text/javascript" src="js/NaviLearnScape/navi_CustomTile.js"></script>
	
	<script type="text/javascript">


var timer;
var updateStarted = false;
var touches = [];

function update() {
	if (updateStarted) return;
	updateStarted = true;

	var i, len = touches.length;
	for (i=0; i<len; i++) {
		var touch = touches[i];
		var px = touch.pageX;
		var py = touch.pageY;
	
		var hitPoint = {x:px, y:py};
		fw.onFingerHits(hitPoint);
	}

	updateStarted = false;
}

function ol() {
	var canvas = document.getElementById('testCanvas');
	fw.init("testCanvas");

	var scene;
	var menuItems = [{name:"menuBadges", text:"Badges", events:{mouseDownEvent: function(point, obj){scene = new BadgeScene();scene.init();}}}, {name:"menuStudents", text:"Students", events:{mouseDownEvent: function(point, obj){scene.exit();}}},{name:"menuSettings", text:"Settings", events:{}}];
	var objects = [new Menu("menu", {x:-200, y:0}, menuItems)/*, tile1, tile2*/];
	fw.addObjectsToCanvas(objects);
	
	fw.drawBackgroundItem();

	timer = setInterval(update, 15);

	canvas.addEventListener('touchend', function() {
		
	});
	canvas.addEventListener('touchmove', function(event) {
	  event.preventDefault();
	  touches = event.touches;
	});
	canvas.addEventListener('touchstart', function(event) {
	  console.log('start');
	});

	
};

</script>

</head>
<body onload="ol()">

<canvas id="testCanvas" resize></canvas>
<object id="tuio" type="application/x-tuio">Plugin FAILED to load</object>
<div id="imageStore" style="display:none"></div>
</body>
</html>